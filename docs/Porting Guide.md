## í¬íŒ… ë©”ë‰´ì–¼

### ëª©ì°¨

[í¬íŠ¸ë²ˆí˜¸](#í¬íŠ¸ë²ˆí˜¸)<br>
[ë²„ì „](#ë²„ì „)<br>
[ë¹Œë“œ ë©”ë‰´ì–¼](#ë¹Œë“œ-ë©”ë‰´ì–¼)<br>
&nbsp;&nbsp;&nbsp;&nbsp;[1. Jenkins ë°°í¬](#1-jenkins-ë°°í¬)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ë„ì»¤íŒŒì¼](#ë„ì»¤íŒŒì¼)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ë„ì»¤ì»´í¬ì¦ˆ](#ë„ì»¤ì»´í¬ì¦ˆ)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Jenkinsfile](#jenkinsfile)<br>
&nbsp;&nbsp;&nbsp;&nbsp;[2. ë°±ì—”ë“œ, í”„ë¡ íŠ¸ ì´ë¯¸ì§€ ë¹Œë“œ](#2-ë°±ì—”ë“œ-í”„ë¡ íŠ¸-ì´ë¯¸ì§€-ë¹Œë“œ)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ìŠ¤í”„ë§ ë„ì»¤íŒŒì¼](#ìŠ¤í”„ë§-ë„ì»¤íŒŒì¼)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ì¥ê³  ë„ì»¤íŒŒì¼](#ì¥ê³ -ë„ì»¤íŒŒì¼)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ë…¸ë“œ ë„ì»¤íŒŒì¼](#ë…¸ë“œ-ë„ì»¤íŒŒì¼)<br>
&nbsp;&nbsp;&nbsp;&nbsp;[3. Nginx ì„¤ì • ë° í”„ë¡ íŠ¸ ì„œë¹™](#3-nginx-ì„¤ì •-ë°-í”„ë¡ íŠ¸-ì„œë¹™)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[nginx.conf](#nginxconf)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ë„ì»¤ ì»´í¬ì¦ˆ](#ë„ì»¤-ì»´í¬ì¦ˆ)<br>
&nbsp;&nbsp;&nbsp;&nbsp;[4. DB ì»¨í…Œì´ë„ˆ ì‹¤í–‰](#4-db-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[MySQL ë°°í¬DBì„œë²„](#mysql-ë°°í¬dbì„œë²„)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[MySQL ê°œë°œDBì„œë²„](#mysql-ê°œë°œdbì„œë²„)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ë ˆë””ìŠ¤ ìºì‹œ ì„œë²„](#ë ˆë””ìŠ¤-ìºì‹œ-ì„œë²„)<br>
&nbsp;&nbsp;&nbsp;&nbsp;[5. ë¹„ë°€í‚¤ ì„¸íŒ…](#5-ë¹„ë°€í‚¤-ì„¸íŒ…)<br>
&nbsp;&nbsp;&nbsp;&nbsp;[6. Wear OS Watch Install](#wear-os-watch-install)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Android ì„¤ì •](#android-ì„¤ì •)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° í”ŒëŸ¬ê·¸ì¸ ë²„ì „](#ì£¼ìš”-ë¼ì´ë¸ŒëŸ¬ë¦¬-ë°-í”ŒëŸ¬ê·¸ì¸-ë²„ì „)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[í”„ë¡œì íŠ¸ ì„¤ì¹˜](#í”„ë¡œì íŠ¸-ì„¤ì¹˜)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ì‚¬ì „ ìš”êµ¬ ì‚¬í•­](#ì‚¬ì „-ìš”êµ¬-ì‚¬í•­)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Android Studio ì‚¬ìš©](#android-studio-ì‚¬ìš©)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[SeoLo_Watch.apk ì„¤ì¹˜](#seolo_watchapk-ì„¤ì¹˜)<br>
&nbsp;&nbsp;&nbsp;&nbsp;[7. Flutter App Install](#flutter-app-install)<br>

# í¬íŠ¸ë²ˆí˜¸

|                | PORT ë²ˆí˜¸ |
| -------------- | --------- |
| http           | 80        |
| https          | 443       |
| Spring         | 8080      |
| Django         | 8000      |
| Jenkins        | 9000      |
| MySQL-Dev      | 3306      |
| MySQL-Prod     | 3316      |
| Redis-Jwt      | 6378      |
| Redis-Jwt-Dev  | 6379      |
| Redis-Jwt-News | 6380      |

## ë²„ì „

- node 20.10.0
- Recoil 0.7.7
- TypeScript 5.2.2
- Nginx 1.25.5
- Java 17
- Gradle 8.5
- Spring 3.2.5
- Django 5.0.4
- Flutter 3.19.5
- Dart 3.3.3
- Kotlin 1.9.0

# ë¹Œë“œ ë©”ë‰´ì–¼

## 1. Jenkins ë°°í¬

### ë„ì»¤íŒŒì¼

```java
FROM jenkins/jenkins

USER root

ENV DEBIAN_FRONTEND noninteractive
ENV DEBCONF_NOWARNINGS="yes"

RUN apt-get -y update && \
    apt-get install -y --no-install-recommends \
    vim \
    apt-utils \
    ca-certificates \
    curl \
    gnupg \
    lsb-release \
    sudo

# Docker CE ì„¤ì¹˜
RUN curl -fsSL https://download.docker.com/linux/debian/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg && \
    echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null && \
    apt-get -y update && \
    apt-get -y install docker-ce docker-ce-cli containerd.io

# Docker Compose ì„¤ì¹˜
RUN curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose && \
    chmod +x /usr/local/bin/docker-compose

# Jenkins ì‚¬ìš©ìì—ê²Œ sudo ê¶Œí•œ ë¶€ì—¬
RUN echo "jenkins ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers

USER jenkins
EXPOSE 8080
```

### ë„ì»¤ì»´í¬ì¦ˆ

```java
version: '3.8'

services:
  jenkins:
    container_name: seolo-jenkins
    build:
      context: .
      dockerfile: Dockerfile # ì‚¬ìš©í•  Dockerfileì˜ ì´ë¦„, í´ë” ë‚´ ë‹¤ë¥¸ ì´ë¦„ì˜ íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë³€ê²½ ê°€ëŠ¥
    ports:
      - "9000:8080"
    volumes:
      - /var/jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - jenkins-network

networks:
  jenkins-network:
    external: true
```

### Jenkinsfile

```java
pipeline {
    agent any
    environment {
        // í™˜ê²½ ë³€ìˆ˜ ì •ì˜
        DOCKER_COMPOSE_FILE = 'DevOps/docker-compose.yml'
        REPO_URL = 'https://lab.ssafy.com/s10-final/S10P31C104.git'
        BRANCH_NAME = 'feature/be-auth'
        CREDENTIALS_ID = 'seolo-git-token'
        GITHUB_CREDENTIALS_ID = 'seolo-github-token'
        GITHUB_REPO_URL = 'https://github.com/makeUgreat/seolo-config.git'
        GITHUB_REPO_URL_DJANGO = 'https://github.com/makeUgreat/seolo-django-config.git'
        PROFILES_ACTIVE = 'dev'
    }

    stages {
        stage('Set Permissions') {
            steps {
                script {
                    // ê¶Œí•œ ì„¤ì •
                    sh 'sudo chmod -R 777 /var/jenkins_home/workspace'
                    echo "Permissions have been set to 777 for all files in workspace."
                }
            }
        }
        stage('Prepare Workspace') {
            steps {
                script {
                    env.PROFILES_ACTIVE = (env.BRANCH_NAME == 'master') ? 'prod' : 'dev'

                    // í˜„ì¬ ì‘ì—… ê³µê°„ ì „ì²´ë¥¼ ì •ë¦¬
                    echo "Attempting to clean the workspace..."
                    sh 'pwd'
                    try {
                        deleteDir()
                        echo "Workspace cleaned successfully."
                    } catch (Exception e) {
                        echo "Failed to clean the workspace."
                        echo "Error: ${e.getMessage()}"
                        sh 'ls -la'  // í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ ëª©ë¡ê³¼ ê¶Œí•œì„ ì¶œë ¥
                    }
                }
            }
        }

        stage('Clone Repository') {
            steps {
                script {
                    // Git ì €ì¥ì†Œì—ì„œ develop ë¸Œëœì¹˜ í´ë¡ 
                    git branch: env.BRANCH_NAME, credentialsId: env.CREDENTIALS_ID, url: env.REPO_URL

                    // Mattermostì— ë¹Œë“œ ì‹œì‘ ë©”ì‹œì§€ ë³´ë‚´ê¸°
                    def Author_ID = sh(script: "git show -s --pretty=%an", returnStdout: true).trim()
                    def Author_Name = sh(script: "git show -s --pretty=%ae", returnStdout: true).trim()
                    mattermostSend(color: 'warning',
                        message: "ë¹Œë“œ ì‹œì‘: ${env.JOB_NAME} #${env.BUILD_NUMBER} by ${Author_ID}(${Author_Name})\n(<${env.BUILD_URL}|Details>)",
                        endpoint: 'https://meeting.ssafy.com/hooks/xc1nh4iaw7dofr9sooojdhx6qh',
                        channel: 'C104Build'
                    )

                    // SECRET KEY ì €ì¥ì†Œ clone
                    dir('backend/seolo/src/main/resources') {
                        echo "Active profile is ${env.PROFILES_ACTIVE}"

                        // devë¡œ profile ë³€ê²½
                        sh "sed -i 's/active: local/active: ${env.PROFILES_ACTIVE}/' application.yml"
                        sh "cat application.yml"
                        sh 'mkdir -p confidence'
                        dir('confidence') {
                            git branch: 'master', credentialsId: env.GITHUB_CREDENTIALS_ID, url: env.GITHUB_REPO_URL
                        }
                    }

                    // ìƒˆë¡œìš´ ì„œë¸Œëª¨ë“ˆ í´ë¡ 
                    dir('backend/news/news') {
                        sh 'mkdir -p setting'
                        dir('setting') {
                            git branch: 'master', credentialsId: env.GITHUB_CREDENTIALS_ID, url: env.GITHUB_REPO_URL_DJANGO
                        }
                    }
                }
            }
        }

        stage('Prepare Docker Compose') {
            steps {
                script {
                    // docker-compose ì„¤ì¹˜ í™•ì¸ ë° ì„¤ì¹˜
                    sh '''
                    if ! command -v docker-compose &> /dev/null
                    then
                        echo "Installing docker-compose..."
                        sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-\$(uname -s)-\$(uname -m)" -o /usr/local/bin/docker-compose
                        sudo chmod +x /usr/local/bin/docker-compose
                    else
                        echo "docker-compose is already installed."
                    fi
                    '''
                }
            }
        }

        stage('Shutdown Existing Services') {
            steps {
                script {
                    // ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ë¥¼ ì¢…ë£Œ
                    sh "docker-compose -f ${env.DOCKER_COMPOSE_FILE} down"
                }
            }
        }

        stage('Build Nginx & Frontend') {
            steps {
                script {
                    dir('frontend/web') {
                    sh "pwd"
                    sh "docker build -t seolo-nginx/front:latest ."
                    }
                }
            }
        }

        stage('Compose') {
            steps {
                script {
                    sh "docker-compose -f ${env.DOCKER_COMPOSE_FILE} up -d --build"
                }
            }
        }

        stage('Cleanup') {
            steps {
                script {
                    // ë¯¸ì‚¬ìš© Docker ì´ë¯¸ì§€ ì •ë¦¬
                    sh 'docker image prune --force --filter "until=24h"'
                }
            }
        }
    }

    post {
        success {
            script {
                def Author_ID = sh(script: "git show -s --pretty=%an", returnStdout: true).trim()
                def Author_Name = sh(script: "git show -s --pretty=%ae", returnStdout: true).trim()
                mattermostSend (color: 'good',
                message: "ë¹Œë“œ ì„±ê³µ: ${env.JOB_NAME} #${env.BUILD_NUMBER} by ${Author_ID}(${Author_Name})\n(<${env.BUILD_URL}|Details>)",
                endpoint: 'https://meeting.ssafy.com/hooks/xc1nh4iaw7dofr9sooojdhx6qh',
                channel: 'C104Build'
                )
            }
        }

        failure {
            script {
                def Author_ID = sh(script: "git show -s --pretty=%an", returnStdout: true).trim()
                def Author_Name = sh(script: "git show -s --pretty=%ae", returnStdout: true).trim()
                mattermostSend (color: 'danger',
                message: "ë¹Œë“œ ì‹¤íŒ¨: ${env.JOB_NAME} #${env.BUILD_NUMBER} by ${Author_ID}(${Author_Name})\n(<${env.BUILD_URL}|Details>)",
                endpoint: 'https://meeting.ssafy.com/hooks/xc1nh4iaw7dofr9sooojdhx6qh',
                channel: 'C104Build'
                )
            }
        }
    }
}

```

## 2. ë°±ì—”ë“œ, í”„ë¡ íŠ¸ ì´ë¯¸ì§€ ë¹Œë“œ

### ìŠ¤í”„ë§ ë„ì»¤íŒŒì¼

```java
# 1ë‹¨ê³„: Gradleì„ ì´ìš©í•´ ë¹Œë“œ
FROM gradle:8.5.0-jdk17-alpine AS build

WORKDIR /app

# Gradle ì„¤ì • íŒŒì¼ë“¤ì„ Docker ì´ë¯¸ì§€ ì•ˆìœ¼ë¡œ ë³µì‚¬
COPY gradlew .
COPY gradle gradle
# í”„ë¡œì íŠ¸ì˜ ì†ŒìŠ¤ ì½”ë“œì™€ ë¹Œë“œ íŒŒì¼ ë³µì‚¬
COPY build.gradle .
COPY settings.gradle .
COPY src src

RUN chmod +x ./gradlew
# bootJarë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸ì—†ì´ ë¹Œë“œ ìˆ˜í–‰
RUN ./gradlew bootJar

# 2ë‹¨ê³„: Java Runtime ì´ë¯¸ì§€ ì•ˆì— ë¹Œë“œ ê²°ê³¼ë¬¼ì„ ë„£ì–´ ì‹¤í–‰
FROM azul/zulu-openjdk:17

WORKDIR /app

# ë¹Œë“œ ê²°ê³¼ë¬¼ì„ ì´ì „ ë‹¨ê³„ì—ì„œ ë³µì‚¬
COPY --from=build /app/build/libs/*.jar /app.jar

# ì„œë²„ ì‹¤í–‰
ENTRYPOINT ["java","-jar", "-Djava.security.egd=file:/dev/./urandom","/app.jar"]

```

### ì¥ê³  ë„ì»¤íŒŒì¼

```java
# ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¡œ Python ê³µì‹ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
FROM python:3.10

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

# ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ /appìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
WORKDIR /app

# ì˜ì¡´ì„± ì„¤ì¹˜
COPY requirements.txt /app

# ìµœì‹  ë²„ì „ì˜ pipë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
RUN /usr/local/bin/python -m pip install --upgrade pip

# í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
RUN pip install --no-cache-dir -r requirements.txt

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬
COPY ./ /app

# gunicorn ì„¤ì¹˜
RUN pip install gunicorn

# Python ê²½ë¡œ ì„¤ì • (my_setting.py íŒŒì¼ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ í¬í•¨)
ENV PYTHONPATH=/app/news

# Docker ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì‹¤í–‰ë  ëª…ë ¹ì„ ì§€ì •í•©ë‹ˆë‹¤.
CMD ["gunicorn", "--bind", "0.0.0.0:8000", "news.wsgi:application"]
```

### ë…¸ë“œ ë„ì»¤íŒŒì¼

```java
# ê¸°ë³¸ ì´ë¯¸ì§€ë¡œ Node.js ë²„ì „ 20.11.0 ì‚¬ìš©
FROM node:20.11.0 as build

# ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /usr/src/app

# package.json ë° package-lock.jsonì„ ë³µì‚¬í•˜ì—¬ ì¢…ì†ì„± ì„¤ì¹˜
COPY package*.json ./

# ì¢…ì†ì„± ì„¤ì¹˜
RUN npm install

# ë‚˜ë¨¸ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë³µì‚¬
COPY . .

# í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ë¹Œë“œ
RUN npm run build

# NGINX ì´ë¯¸ì§€ ìƒì„±
FROM nginx:latest

# NGINXì—ì„œ ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /usr/share/nginx/html

# ê¸°ë³¸ NGINX ì •ì  ì½˜í…ì¸  ì œê±°
RUN rm -rf ./*

# Node.js ë¹Œë“œ ë‹¨ê³„ì—ì„œ ë¹Œë“œëœ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ë³µì‚¬
COPY --from=build /usr/src/app/dist/ .
```

## 3. Nginx ì„¤ì • ë° í”„ë¡ íŠ¸ ì„œë¹™

### nginx.conf

```java
events {
    worker_connections 1024;
}

http {
    client_max_body_size 20M;

    # WebSocket ì—°ê²°ì„ ìœ„í•œ ë³€ìˆ˜ ì„¤ì •
    map $http_upgrade $connection_upgrade {
        default upgrade;
        ''      close;
    }

    upstream backend {
        server back:8080;
    }

    upstream news {
        server seolo-news:8000;
    }

    server {
        listen 80;
        server_name k10c104.p.ssafy.io;
        return 301 https://$server_name$request_uri; # HTTP ìš”ì²­ì„ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    }

    server {
        listen 443 ssl;
        http2 on;
        server_name k10c104.p.ssafy.io;
        include /etc/nginx/mime.types;

        ssl_certificate /etc/ssl/certs/fullchain1.pem;
        ssl_certificate_key /etc/ssl/private/privkey1.pem;

        # FRONTEND WEB í”„ë¡ì‹œ
        location / {
            root /usr/share/nginx/html;  # ì •ì  íŒŒì¼ ì„œë¹™
            index index.html index.htm;
            try_files $uri $uri/ /index.html =404;
        }

        # BACKEND í”„ë¡ì‹œ (ì›¹ì†Œì¼“ ë° SSE í—¤ë” í¬í•¨)
        location /api/ {
            rewrite ^/api(.*) $1 break; # /api ì œê±°
            proxy_pass http://backend;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection $connection_upgrade;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_buffering off;
            proxy_cache off;
            proxy_read_timeout 7200s; # SSEë¥¼ ìœ„í•œ ì„¤ì •
        }

        location /django/ {
            rewrite ^/django(.*) $1 break; #
            proxy_pass http://news;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}

```

### ë„ì»¤ ì»´í¬ì¦ˆ

```java
version: '3.8'

services:
  nginx:
    container_name: seolo-nginx
    image: seolo-nginx/front:latest
    ports:
      - "443:443"
      - "80:80"
    volumes:
      - /home/ubuntu/certificates/k10c104.p.ssafy.io/fullchain1.pem:/etc/ssl/certs/fullchain1.pem
      - /home/ubuntu/certificates/k10c104.p.ssafy.io/privkey1.pem:/etc/ssl/private/privkey1.pem
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - back
    environment:
      - TZ=Asia/Seoul
    networks:
      - jenkins-network

  back:
    container_name: seolo-back
    build:
      context: ../backend/seolo
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    environment:
      - TZ=Asia/Seoul
    networks:
      - jenkins-network

  news-server:
    container_name: seolo-news
    build:
      context: ../backend/news
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    environment:
      - TZ=Asia/Seoul
    networks:
      - jenkins-network

networks:
  jenkins-network:
    external: true

```

## 4. DB ì»¨í…Œì´ë„ˆ ì‹¤í–‰

### MySQL ë°°í¬DBì„œë²„

ID : root

PWD: sEoLo202404181046

```java
docker run --name seolo-product-mysql -e MYSQL_ROOT_PASSWORD=sEoLo202404181046 -p 3306:3306 -v /opt/datadir_prod:/var/lib/mysql -d --restart=on-failure mysql:latest
```

### MySQL ê°œë°œDBì„œë²„

ID : root

PWD: develop1234

```java
docker run --name seolo-dev-mysql -e MYSQL_ROOT_PASSWORD=develop1234 -p 3316:3306 -v /opt/datadir_dev:/var/lib/mysql -d --restart=on-failure mysql:latest
```

### ë ˆë””ìŠ¤ ìºì‹œ ì„œë²„

```java
docker run -d --name redis-token-local -p 6378:6379 redis/redis-stack-server:latest
```

```java
docker run -d --name redis-token -p 6379:6379 redis/redis-stack-server:latest
```

```java
docker run -d --name redis-token-local -p 6380:6379 redis/redis-stack-server:latest
```

### **MySQL ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë°©ë²•**

1.  **Docker ì„¤ì¹˜ í™•ì¸:**
    ìš°ì„ , ì‹œìŠ¤í…œì— Dockerê°€ ì„¤ì¹˜ë˜ì–´ ìˆê³  ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´, Docker ê³µì‹ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì„¤ì¹˜ ì§€ì¹¨ì„ ë”°ë¼ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2.  **MySQL ì»¨í…Œì´ë„ˆ ì‹¤í–‰:**
    ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ MySQL ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ ëª…ë ¹ì–´ëŠ” MySQLì˜ ìµœì‹  ë²„ì „ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©°, í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜(ì˜ˆ: root ë¹„ë°€ë²ˆí˜¸)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
    `bash
docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -p 8282:3306 -v /opt/datadir:/var/lib/mysql -d mysql:latest
`

                ë³¼ë¥¨ë§¤í•‘

                `docker run -v /opt/datadir:/var/lib/mysql mysq`

                ì´ ëª…ë ¹ì–´ì—ì„œ **`some-mysql`**ì€ ì»¨í…Œì´ë„ˆì˜ ì´ë¦„ì„ ì§€ì •í•˜ë©°, **`MYSQL_ROOT_PASSWORD`**ëŠ” MySQL root ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. **`mysql:latest`**ëŠ” ì‚¬ìš©í•  MySQL ì´ë¯¸ì§€ì™€ íƒœê·¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤(ì—¬ê¸°ì„œëŠ” ìµœì‹  ë²„ì „ì„ ì‚¬ìš©í•©ë‹ˆë‹¤).

3.  **ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸:**
    MySQL ì»¨í…Œì´ë„ˆê°€ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

    ````bash

        docker ps
        ```

    ````

4.  **MySQL ì»¨í…Œì´ë„ˆì— ì ‘ì†:**
    ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ê³  ë‚˜ë©´, ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ MySQL ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ MySQL ì‰˜ì— ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    ````bash

        sudo docker exec -it fodongDB bash -c "mysql -u root -p"
        ```

        ì—¬ê¸°ì„œ **`some-mysql`**ì€ ì»¨í…Œì´ë„ˆì˜ ì´ë¦„ì´ë©°, **`mysql -uroot -p`**ëŠ” MySQL ì‰˜ì— ì ‘ì†í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ì…ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ì„ ìš”ì²­í•˜ë©´ ì•ì„œ ì„¤ì •í•œ **`MYSQL_ROOT_PASSWORD`** ê°’ì„ ì…ë ¥í•©ë‹ˆë‹¤.

        ### MySQL ì»¨í…Œì´ë„ˆ ì„¤ì •í•˜ê¸°

        `sudo docker exec -it fodongDB bash -c "mysql -u root -p"`

        ëª…ë ¹ì–´ë¥¼ í†µí•´ MySQL ì„¤ì • íŒŒì¼ ë“¤ì–´ê°€ê¸°

        ```sql
        CREATE USER 'username'@'%' IDENTIFIED BY 'password';
        GRANT ALL PRIVILEGES ON *.* TO 'username'@'%' WITH GRANT OPTION;
        FLUSH PRIVILEGES;
        ```

        ì‚¬ìš©ìë¥¼ ìƒì„±í•  ë•Œ ì ‘ê·¼ í—ˆìš© ë²”ìœ„ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì • í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

        **'Username'@'%'**Â Â : í•´ë‹¹ ì‚¬ìš©ìëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼ê°€ëŠ¥

        **'Username'@'localhost'**Â  : í•´ë‹¹ ì‚¬ìš©ìëŠ” ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥

        **'Username'@'xxx.xxx.xxx.xxx'**Â  : í•´ë‹¹ ì‚¬ìš©ìëŠ” ì§€ì •í•œ ipì£¼ì†Œë¡œë§Œ ì ‘ê·¼ ê°€ëŠ¥

        ### ì‹¸í”¼ EC2 ë¡œ ì ‘ì†í•˜ëŠ” ê²½ìš° ì¸í…”ë¦¬ì œì´ ë°ì´í„°ê·¸ë¦½ ì„¤ì •

        í¬íŠ¸ ì—´ì–´ì£¼ê¸° (UFW) SSHë¡œ EC2 ì„œë²„ ì ‘ì†í•´ì„œ í¬íŠ¸ ì—´ì–´ì¤€ë‹¤

        ### MySQL ì™¸ë¶€ì ‘ê·¼ IPì—´ì–´ì£¼ê¸°

        *Ubuntu ê¸°ì¤€

        1. ë„ì»¤ë¥¼ í†µí•´ mysql ì»¨í…Œì´ë„ˆ ì„¤ì¹˜í•˜ê³ 
        2. ì»¨í…Œì´ë„ˆ ë“¤ì–´ê°€ì„œ my.cnf íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤( ë³´í†µ ê²½ë¡œ /etc/my.cnf )
        3. [mysqld] ì„¹ì…˜ì— bind-address = 0.0.0.0 ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•œë‹¤

        <aside>
        âš ï¸ ì´ë•Œ í¸ì§‘ ëª…ë ¹ì–´ vi, nano ë“± ì•ˆë¨¹íˆë©´ ê³¨ì¹˜ì•„í”” (ì•„ë˜ ë§í¬ ì°¸ì¡°)

        [í•´ê²°ë°©ë²•. Docker Volume](https://www.notion.so/Docker-Volume-71020bd439ae4f6ea3915f73c4a6a861?pvs=21)

        </aside>

        ### AWS ì›¹ ì½˜ì†”ì„ ì´ìš©í•˜ëŠ” ê²½ìš°

        í¬íŠ¸ ì—´ì–´ì£¼ê¸°

        - AWS ê´€ë¦¬ ì½˜ì†”ì— ë¡œê·¸ì¸í•˜ì—¬ EC2 ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤.
        - ì‚¬ìš© ì¤‘ì¸ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ì†í•œ ë³´ì•ˆ ê·¸ë£¹ì„ ì°¾ìŠµë‹ˆë‹¤.
        - í•´ë‹¹ ë³´ì•ˆ ê·¸ë£¹ì˜ ì¸ë°”ìš´ë“œ ê·œì¹™ì„ í¸ì§‘í•˜ì—¬ ë¡œì»¬ ì»´í“¨í„°ì˜ IP ì£¼ì†Œ ë˜ëŠ” í•„ìš”í•œ ë²”ìœ„ì˜ IP ì£¼ì†Œë¡œë¶€í„° MySQL í¬íŠ¸(ê¸°ë³¸ì ìœ¼ë¡œ 3306)ì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤.

        ### ì¸í…”ë¦¬ì œì´ ë°ì´í„°ê·¸ë¦½ ì—°ê²°

        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/14a02c95-e61a-46ca-bba3-3aeec681f707/627a16e2-7c03-4203-8f46-e06fe6ef5e4c/Untitled.png)

        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/14a02c95-e61a-46ca-bba3-3aeec681f707/a958dce9-8935-491f-84db-93cda72f68f2/Untitled.png)

        **í”„ë¡œì íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ ì„¤ì •**:

        - í”„ë¡œì íŠ¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •ì—ì„œ EC2 MySQL ì„œë²„ì˜ ì£¼ì†Œ, ì‚¬ìš©ì ì´ë¦„, ë¹„ë°€ë²ˆí˜¸, ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤.
        - EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ê³µê°œ IP ì£¼ì†Œë‚˜ ë„ë©”ì¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ ì£¼ì†Œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

            <aside>
            ğŸ’¡ IntelliJì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸° ìœ„í•œ ì„¤ì • ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì€ IntelliJì˜ ë°ì´í„°ë² ì´ìŠ¤ íˆ´ì„ ì‚¬ìš©í•˜ì—¬ ì›ê²© ë˜ëŠ” ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤:

            1. **ë°ì´í„° ì†ŒìŠ¤ ì¶”ê°€**:
                - IntelliJ IDEë¥¼ ì—´ê³ , ì˜¤ë¥¸ìª½ ìƒë‹¨ì— ìˆëŠ” 'Database' íƒ­ì„ í´ë¦­í•©ë‹ˆë‹¤.
                - 'Database' íˆ´ ìœˆë„ìš°ì—ì„œ '+' ë²„íŠ¼ì„ í´ë¦­í•˜ê³  'Data Source'ë¥¼ ì„ íƒí•œ í›„, ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ ìœ í˜• (ì˜ˆ: MySQL)ì„ ì„ íƒí•©ë‹ˆë‹¤.
            2. **ì—°ê²° ì •ë³´ ì…ë ¥**:
                - 'Host' í•„ë“œì— MySQL ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ í˜¸ìŠ¤íŠ¸ì˜ IP ì£¼ì†Œë‚˜ ë„ë©”ì¸ ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤. EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ê³µê°œ IP ì£¼ì†Œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
                - 'Port' í•„ë“œì—ëŠ” MySQL ì„œë²„ì˜ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤ (ê¸°ë³¸ê°’ì€ 3306ì…ë‹ˆë‹¤).
                - 'Database' í•„ë“œì—ëŠ” ì—°ê²°í•˜ê³ ì í•˜ëŠ” MySQL ë°ì´í„°ë² ì´ìŠ¤ì˜ ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤.
                - 'User'ì™€ 'Password' í•„ë“œì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•  ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤. ì´ ì •ë³´ëŠ” MySQL ì„œë²„ì— ì„¤ì •í•œ ì‚¬ìš©ì ê³„ì • ì •ë³´ì™€ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
            3. **ì—°ê²° í…ŒìŠ¤íŠ¸**:
                - ì„¤ì •ì„ ì™„ë£Œí•œ í›„, 'Test Connection' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. ì—°ê²°ì´ ì„±ê³µí•˜ë©´ 'Successful' ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.
            4. **ì €ì¥ ë° ì‚¬ìš©**:
                - ì—°ê²° ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•˜ê³  í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ì´ë©´, 'OK' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì„¤ì •ì„ ì €ì¥í•©ë‹ˆë‹¤.
                - ì´ì œ IntelliJì˜ 'Database' íƒ­ì—ì„œ í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë³¼ ìˆ˜ ìˆìœ¼ë©°, í…Œì´ë¸”ì„ ì¡°íšŒí•˜ê±°ë‚˜ SQL ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

            IntelliJì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì„¤ì •í•˜ëŠ” ì´ ê³¼ì •ì„ í†µí•´ ê°œë°œìëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ìƒí˜¸ì‘ìš©ì„ ì†ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

            </aside>
    ````

## 5. ë¹„ë°€í‚¤ ì„¸íŒ…

ë¹„ë°€í‚¤ ì™¸ë¶€ì €ì¥ì†Œì— credential ìˆëŠ” ê³„ì •ì„ ë“±ë¡í•´
`resources/confidence/application-secret.yml` íŒŒì¼ì„ í´ë¡ í•´ì•¼í•œë‹¤.

<aside>
â›” ë¯¼ê°ì •ë³´ê°€ ìˆì–´ ê³µìœ  ë¶ˆê°€

</aside>

# 6. Wear OS Watch Install

### Android ì„¤ì •

```toml
- complieSdk = 34
- minSdk = 30
- targetSdk = 34
```

### **ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° í”ŒëŸ¬ê·¸ì¸ ë²„ì „**

```toml
agp = "8.4.0"
kotlin = "1.9.0"
playServicesWearable = "18.1.0"
composeBom = "2023.08.00"
composeMaterial = "1.2.1"
composeFoundation = "1.2.1"
activityCompose = "1.7.2"
coreSplashscreen = "1.0.1"
constraintlayout = "2.1.4"
appcompat = "1.6.1"
viewpager2 = "1.0.0"
material = "1.11.0"
securityCryptoKtx = "1.0.0"
```

## **í”„ë¡œì íŠ¸ ì„¤ì¹˜**

### **ì‚¬ì „ ìš”êµ¬ ì‚¬í•­**

- Android Studio ìµœì‹  ë²„ì „ ì„¤ì¹˜
- Java Development Kit (JDK) 8 ì´ìƒ ì„¤ì¹˜
- Android SDK ì„¤ì¹˜ ë° í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### Android Studio ì‚¬ìš©

- Android Studioë¥¼ ì‹¤í–‰í•˜ê³ , **`File > Open`**ì„ ì„ íƒí•˜ì—¬ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì—½ë‹ˆë‹¤.
- ìƒë‹¨ ë©”ë‰´ì—ì„œ **`Sync Project with Gradle Files`** ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í•„ìš”í•œ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.
- **`Run`** ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ Wear OS ì—ë®¬ë ˆì´í„° ë˜ëŠ” ì‹¤ì œ ê¸°ê¸°ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

### SeoLo_Watch.apk ì„¤ì¹˜

- ë‹¤ìš´ë¡œë“œ ê²½ë¡œ
  - https://drive.google.com/file/d/1nZ5mIgbr4J2fttegl1MDPyTAo2awxMgp/view

# 7. Flutter App Install

- build.gradle

```markdown
    defaultConfig {
        minSdkVersion 21
    }
```

- app ë‹¤ìš´ë¡œë“œ ê²½ë¡œ
  [SeoLo_App.apk](https://drive.google.com/file/d/1udeSx9Hdvu-tOLqIKKp5_wNsBOWlPJtL/view?usp=drive_link)
- codeì—ì„œ ì„¤ì¹˜
  ```markdown
  - flutter build apk
  - flutter install (ê¸°ê¸° ì—°ê²° ì‹œ)
  ```
