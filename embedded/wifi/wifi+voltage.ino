#include <WiFiNINA.h>

char ssid[] = "YourNetworkSSID";      // WiFi ???? ??
char pass[] = "YourNetworkPassword";  // WiFi ???? ????

int status = WL_IDLE_STATUS;  // WiFi ??

const int batteryPin = A7;   // ??? ??? ???? ???? ?
const int redPin = 4;        // ??? LED ?
const int greenPin = 3;      // ??? LED ?
const int bluePin = 2;       // ??? LED ?

void setup() {
  // ?? LED ?? ???? ??
  pinMode(LED_BUILTIN, OUTPUT);
  // ??? LED ?? ???? ??
  pinMode(redPin, OUTPUT);
  pinMode(greenPin, OUTPUT);
  pinMode(bluePin, OUTPUT);

  // ??? ?? ??
  Serial.begin(9600);
  while (!Serial) {
    ; // ??? ??? ??? ??? ??
  }

  // WiFi ?? ???
  if (WiFi.status() == WL_NO_MODULE) {
    Serial.println("WiFi module not found!");
    while (true);
  }

  // WiFi ?? ??
  while (status != WL_CONNECTED) {
    Serial.print("Attempting to connect to SSID: ");
    Serial.println(ssid);
    status = WiFi.begin(ssid, pass); // WiFi? ??? ??

    // WiFi ?? ?? ? ??? ?? 1? ?? ? ?? ??
    delay(1000);
  }

  // WiFi? ?????? ??
  Serial.println("Connected to WiFi");
}

void loop() {
  // ??? ?? ??
  int batteryLevel = analogRead(batteryPin);
  // ??? ??? ???? ?? (0-100)
  int percentage = map(batteryLevel, 0, 1023, 0, 100);

  // ??? ??? ?? LED ?? ??
  if (percentage <= 30) {
    // 30% ??? ??: ???
    setColor(255, 0, 0); // ???
  } else if (percentage <= 70) {
    // 70% ??? ??: ???
    setColor(255, 128, 0); // ???
  } else {
    // 100% ??? ??: ???
    setColor(0, 255, 0); // ???
  }

  // ??? ?? ?? LED? ???
  if (status == WL_CONNECTED) {
    digitalWrite(LED_BUILTIN, HIGH); // LED ??
    delay(500); // 0.5? ??
    digitalWrite(LED_BUILTIN, LOW);  // LED ??
    delay(500); // 0.5? ??
  }
}

// LED ?? ?? ??
void setColor(int red, int green, int blue) {
  analogWrite(redPin, red);     // ??? ??
  analogWrite(greenPin, green); // ??? ??
  analogWrite(bluePin, blue);   // ??? ??
}
